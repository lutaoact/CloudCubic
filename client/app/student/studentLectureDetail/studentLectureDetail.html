
<section class="lecture-view player">
  <div class="container">
    <div class="lecture-header text-center">
      <h3>{{lecture.name}}</h3>
      <hr>
      <div class="text-muted">{{lecture.info}}</div>
    </div>
    <div class="view">
      <div class="video-view" ng-show="viewState.isVideo">
        <videogular vg-player-ready="onPlayerReady"
                    vg-update-time="onUpdateTime">
          <video class="videoPlayer" src-key="lecture.media">
          </video>
          <vg-poster-image></vg-poster-image>
          <vg-buffering></vg-buffering>
          <vg-controls style="height: 50px;">
            <vg-play-pause-button></vg-play-pause-button>
            <vg-timeDisplay>{{ currentTime }}</vg-timeDisplay>
            <vg-scrubBar>
              <vg-scrubbarcurrenttime></vg-scrubbarcurrenttime>
            </vg-scrubBar>
            <vg-timeDisplay>{{ totalTime }}</vg-timeDisplay>
            <vg-volume>
              <vg-mutebutton></vg-mutebutton>
              <vg-volumebar></vg-volumebar>
            </vg-volume>
            <vg-fullscreenButton></vg-fullscreenButton>
          </vg-controls>
        </videogular>
        <div class="empty" ng-show="!lecture.media">
          该课程没有视频
        </div>
      </div>

      <div class="ppt-view" ng-show="!viewState.isVideo">
        <div ppt-viewer slides="lecture.slides" ng-show="lecture.slides.length > 0">
        </div>
        <div class="empty" ng-hide="lecture.slides.length > 0">
          该课程没有ppt
        </div>
      </div>
    </div>

    <div class="switch">
      <a class="btn" ng-class="{'active':viewState.isVideo,'selected':viewState.isVideo}" ng-click="viewState.isVideo = true">
        <i class="fa fa-toggle-right"></i>
      </a>
      <a class="btn" ng-class="{'active':!viewState.isVideo,'selected':!viewState.isVideo}" ng-click="viewState.isVideo = false">
        <i class="fa fa-file-powerpoint-o"></i>
      </a>
      <a class="btn" ng-class="{'active':viewState.showDiscussion}" ng-click="toggleDiscussionPanel()">
        <i class="fa fa-comment-o"></i>
      </a>
      <a class="btn sub" ng-class="{'active':lecture.$liked}" ng-click="lecture.$liked = !lecture.$liked">
        <i class="fa fa-heart"></i>
      </a>
      <a class="btn sub" ng-class="{'active':lecture.$collected}" ng-click="lecture.$collected = !lecture.$collected">
        <i class="fa fa-star"></i>
      </a>
    </div>

    <!-- keyponits -->
    <div class="key-points">
      <div class="indicator text-center pull-left">
        <i class="fa fa-tags"></i>
        <div>知识点</div>
      </div>
      <div class="list-group">
        <a href
           class="btn key-point"
           ng-repeat="keypoint in lecture.keyPoints|orderBy:'timestamp'"
           ng-click="seek(keypoint.timestamp)"
           ng-class="{'active':isKeypointActive(keypoint)}"
           ng-disabled="!mediaPlayerAPI"
           >
          {{keypoint.kp.name}}
        </a>
      </div>
    </div>
  </div>

</section>

<section class="quiz-and-homework">
  <div student-lecture-answers lecture="lecture">
  </div>
</section>

<div class="mask" ng-show="viewState.showDiscussion" ng-click="viewState.showDiscussion = false"></div>
<div ng-if="viewState.discussPanelnitialized" ng-include="'app/forum/forumSider/forumSider.html'" ng-controller="ForumSiderCtrl" ng-show="viewState.showDiscussion" class="sider">
</div>

