<div class="order-detail">
  <div class="order-num" ng-click="isCollapsed = !isCollapsed">
    {{order.created | date: 'yyyy-MM-dd'}} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="text-muted">订单号：</span>{{order._id}}
    <a class="close pull-right"
       ng-hide="order.status=='succeed' || onOrderDeleted()==undefined"
       href
       ng-click="deleteOrder(order)">&times;
    </a>
  </div>
  <div collapse="isCollapsed">
    <div ng-repeat="classe in order.classes"
         ui-sref="course.detail({courseId: classe.courseId._id,classeId: classe._id})"
         class="order-classe row">

      <div class="col-md-3 col-img">
        <img class="item-image" src="{{classe.courseId.thumbnail}}">
      </div>
      <div class="col-md-4">
        <div class="course-name">{{classe.courseId.name}}</div>
        <div class="classe-duration text-muted">
          <div class="classe-col">
            总课时
            <span>{{classe.courseId.lectureAssembly.length}}</span>
          </div>
          <div class="classe-col">
            上课时间
            <span>{{classe.duration.from | date: 'yyyy.MM.dd'}}</span>
          </div>
          <div class="classe-col">
            结束时间
            <span>{{classe.duration.to | date: 'yyyy.MM.dd'}}</span>
          </div>
        </div>
      </div>

      <div class="col-md-3">
        <div class="class-name text-muted">{{classe.name}}</div>
      </div>
      <div class="col-md-2 class-price">
        <div class="pull-right">￥{{classe.price}}</div>
      </div>
    </div>
  </div>

  <div class="order-footer row">
    <div class="col-md-4 col-md-offset-6">
      <span class="total-price">{{order.classes.length}}</span>&nbsp;个课程&nbsp;/&nbsp;共计：<span class="total-price">￥{{order.totalFee}}</span>
    </div>
    <div class="col-md-2">
      <div ng-switch="order.status" class="pull-right">
        <div ng-switch-when='succeed' class="pay-msg">
          已支付
        </div>
        <div ng-switch-default>
          <button ng-click="pay()"
                  ng-hide="Auth.getCurrentUser().role == 'admin'"
                  class="btn btn-danger btn-sm rounded pay-btn">支付宝结算
          </button>
          <div class="pay-msg"
               ng-show="Auth.getCurrentUser().role == 'admin'">
            未支付
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
