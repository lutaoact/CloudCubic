
<div class="modal-header">
  <h4 class="modal-title">
    <span ng-if="!forum._id">添加讨论组</span>
    <span ng-if="forum._id">编辑讨论组</span>
    <a class="close" ng-click="cancel()">&times;</a>
  </h4>
</div>

<form class="form-horizontal row edit-forum-form" novalidate
      name="form">
  <div class="form-group">
    <label class="control-label col-sm-3">讨论组名</label>
    <div class="col-sm-8">
      <input class="form-control"
             id="forum-name"
             ng-init="nameInputFocus=true"
             focus-me="nameInputFocus"
             placeholder="请输入讨论组名称"
             ng-model="forum.name"
             required>
      <small class="text-danger" ng-if="errors.name">{{ errors.name.message }}</small>
    </div>
  </div>

  <div class="form-group" ng-if="!forum.$category">
    <label class="control-label col-sm-3">类别</label>
    <div class="col-sm-8">
      <select
        class="form-control"
        id="forum-category"
        ng-model="forum.categoryId"
        ng-options="category.name for category in categories" >
      </select>
    </div>
  </div>

  <div class="form-group" ng-if="!forum.$category">
    <label class="control-label col-sm-3">类别</label>
    <div class="col-sm-8">
      <uploader
        limit="{{imageSizeLimitation}}"
        on-complete="onLogoUpload($data)"
        accept-type="image"
        crop="true"
        crop-ratio="1.5"
        max-width="600">
        <div class="logo" ng-if="forum.logo" src-key="forum.logo" source-attr="background-image">
        </div>
        <div class="drag-uploder" ng-if="!forum.logo">
          <div>拖拽<span class="text-muted">或</span>点击按钮<span class="text-muted">上传</span></div>
          <div class="btn btn-xs btn-danger rounded">
            <i class="fa fa-image"></i>
            上传图片
          </div>
        </div>
      </uploader>
    </div>
  </div>

  <div class="form-group">
    <label class="control-label col-sm-3">讨论组简介</label>
    <div class="col-sm-8">
      <input class="form-control"
             id="forum-info"
             placeholder="请输入描述..."
             ng-model="forum.info">
      <small class="text-danger" ng-if="errors.name">{{ errors.name.message }}</small>
    </div>
  </div>

  <div class="modal-footer col-md-10 col-md-offset-1">
    <div class="pull-right">
      <button type="button"
              class="btn btn-sm btn-default rounded"
              ng-click="cancel()">取消</button>
      <button type="submit"
              class="btn btn-sm btn-danger rounded"
              ng-click="confirm(form)">确认</button>
    </div>
  </div>

</form>
