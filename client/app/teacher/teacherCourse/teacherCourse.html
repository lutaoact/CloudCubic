<div>
  <section class="teacher-course" ng-class="{'editing':viewState.editingInfo}">
    <div class="container">
      <div class="row">

        <div class="col-md-12 course-info" ng-init="viewState.displayView='info'">
          <div class="course-actions-bar clearfix">
            <div class="pull-right" style="margin-top: 5px;" >
              <div ng-if="viewState.editingInfo">
                <a href="" class="btn btn-sm rounded btn-danger" ng-click="saveCourseInfo()">
                  保存
                </a>
                <a href="" class="btn btn-sm rounded btn-default" ng-click="resetCourseInfo()">
                  取消
                </a>
              </div>
              <span dropdown class="setting-btn pull-right" ng-if="!viewState.editingInfo" style="position: relative;">
                <a href="" class="btn btn-xs" dropdown-toggle>
                  <i class="budon budon-bars"></i>
                </a>
                <ul class="dropdown-menu" role="menu">
                  <li><a href="" ng-click="viewState.editingInfo = true">编辑</a></li>
                  <li><a href="" ng-click="removeCourse()">删除</a></li>
                </ul>
              </span>
            </div>
          </div>
          <div class="row">
            <div class="col-md-7 course-info-left">
              <div
                ng-if="viewState.editingInfo">
                <uploader
                  class="course-thumbnail-uploader"
                  on-complete="onThumbUploaded($data)"
                  limit="{{imageSizeLimitation}}"
                  crop="true"
                  crop-ratio="1.75"
                  max-width="1000"
                  accept-type="image"
                  >
                  <div
                    class="course-thumbnail"
                    src-key="course.thumbnail"
                    source-attr="background-image"
                    >
                    <div class="mask">
                      <div class="btn btn-danger rounded">修改</div>
                    </div>
                  </div>
                </uploader>
              </div>
              <div
                ng-if="!viewState.editingInfo"
                class="course-thumbnail"
                src-key="course.thumbnail"
                source-attr="background-image">
              </div>
            </div>
            <div class="col-md-5 course-info-right">
              <h3 class="course-title" ng-if="!viewState.editingInfo">
                {{course.name}}
              </h3>
              <div ng-if="viewState.editingInfo" >
                <textarea type="text" class="form-control course-title pull-left" ng-model="course.name"></textarea>
              </div>

              <div class="classe-select pull-left" ng-if="!viewState.editingInfo">
                <span class="classe-label">科目：</span> <span>{{course.categoryId.name}}</span>
              </div>

              <div class="classe-select pull-left" ng-if="viewState.editingInfo">
                <span class="classe-label">科目：</span>
                <select ng-model="course.$category"
                        class="form-control"
                        ng-disabled="!viewState.editingInfo"
                        ng-options="category.name for category in categories">
                </select>
              </div>

              <div class="clearfix"></div>
              <hr>
              <div class="teachers">
                <div class="teacher" ng-repeat="teacher in course.$teachers">
                  <div class="avatar-md"
                       title="{{teacher.name}}"
                       source-attr="background-image"
                       src-key="teacher.avatar"
                       suffix="?imageView2/1/w/64/h/64"
                       >
                  </div>
                </div>
              </div>

            </div>
          </div>

        </div>

        <div class="col-md-12">
          <div class="course-stuff">
            <ul class="nav nav-pills" role="tablist">
              <li role="presentation" ng-class="{'active':viewState.displayView=='info'}"><a href="" ng-click="viewState.displayView='info'">课程信息</a></li>
              <li role="presentation" ng-class="{'active':viewState.displayView=='lectures'}"><a href="" ng-click="viewState.displayView='lectures'">课时列表({{course.lectureAssembly.length||0}})</a></li>
              <li role="presentation" ng-class="{'active':viewState.displayView=='comments'}"><a href="" ng-click="viewState.displayView='comments'">评论({{course.commentsNum||0}})</a></li>
            </ul>

            <hr>

            <div ng-show="viewState.displayView=='info'">
              <div class="course-desc">
                <h4>
                  <i class="glyphicon glyphicon-bookmark base-color"></i>&nbsp;课程详细内容
                </h4>
                <div class="blog" ng-if="!viewState.editingInfo" compile-html="course.info">
                </div>
                <text-angular class="bud" ng-model="course.info" ng-if="viewState.editingInfo"></text-angular>
              </div>
            </div>

            <teacher-course-lectures course="course" ng-show="viewState.displayView=='lectures'"
                                     classe="selectedClasse"></teacher-course-lectures>

            <comments belong-to="course._id" type="2" ng-show="viewState.displayView=='comments'" active-comment="dataId"></comments>

          </div>
        </div>
      </div>
    </div>
  </section>

</div>
