<div class="container padding-top-20">
  <form class="form-horizontal media" name="form" role="form">
    <div class="media-object pull-right">
      <uploader limit="2*1024*1024"
                on-complete="onThumbUploaded($data)"
                accept="image">
        <img src-key="lecture.thumbnail"
             suffix="?imageView2/2/w/210/h/140"
             src="/assets/images/empty.jpg"/>
      </uploader>
    </div>
    <div class="media-body">
      <div class="form-group">
        <div class="col-sm-2 control-label">
          <label for="lecture-name">课时名称</label>
        </div>
        <div class="col-sm-10">
          <input class="form-control"
                 id="lecture-name"
                 name="name"
                 type="text"
                 focus-me="titleInputFocus"
                 ng-init="titleInputFocus=true"
                 ng-model="lecture.name"
                 placeholder="课时名称"
                 required>
        </div>
      </div>
      <div class="form-group">
        <div class="col-sm-2 control-label">
          <label for="lecture-info">课时信息</label>
        </div>
        <div class="col-sm-10">
          <textarea class="form-control"
                    id="lecture-info"
                    name="info"
                    rows="2"
                    ng-model="lecture.info"
                    placeholder="课时信息">
          </textarea>
        </div>
      </div>

      <div class="form-group">
        <div class="col-sm-offset-2 col-sm-10">
          <uploader limit="50*1024*1024"
                    on-complete="onPPTUploaded($data)"
                    accept="ppt">
            导入PPT
          </uploader>
          <uploader limit="10*1024*1024"
                    multiple="true"
                    on-complete="onImagesUploaded($data)"
                    accept="image">
            导入图片
          </uploader>
          <uploader limit="100*1024*1024"
                    on-complete="onMediaUploaded($data)"
                    accept="video">
            导入视频
          </uploader>
        </div>
      </div>

      <div class="form-group">
        <div class="col-sm-offset-2 col-sm-10">
          <button type="submit"
                  class="btn btn-default"
                  ng-click="saveLecture(lecture,form)">
            保存
          </button>
          <a class="btn btn-link"
             ui-sref="teacher.home">
            <i class="fa fa-arrow-circle-o-left"></i>
            返回
          </a>
        </div>
      </div>
    </div>
  </form>
  <hr/>
  <div class="row">
    <div class="col-md-6 media">
      <div class="pull-left">
        <div class="list-group"
            style="
            -webkit-user-select: none;
            -user-select: none;
            -moz-user-select: none;
            position:relative;
            max-height: 320px;
            overflow: scroll;
            ">
          <a class="list-group-item stretch media-object"
              ng-class="{'active':slide.$active}"
              ng-click="slide.$active = true"
              ng-repeat-reorder="slide in lecture.slides"
              ng-repeat-reorder-handle="div.drag-point">
            <div class="drag-point fa fa-bars" draggable="true"></div>
            <img src-key="slide.thumb"
                 suffix="?imageView2/2/w/40/h/40"
                 style="max-height:40px;max-width:40px">
            <span ng-click="removeSlide($index)">
              <span class="glyphicon glyphicon-trash"></span>
            </span>
          </a>
        </div>
      </div>
      <div class="media-body">
        <cool-projector disable-animation="true">
          <cool-frame ng-repeat="slide in lecture.slides"
                      active="slide.$active">
            <img src-key="slide.raw"
                 suffix="?imageView2/2/w/500/h/500"
                 style="margin:auto;max-height:500px;max-width:500px">
            <div class="carousel-caption">
              <h4>第 {{$index+1}} 张</h4>
            </div>
          </cool-frame>
        </cool-projector>
      </div>
    </div>
    <div class="col-md-6 col-xs-11" ng-show="lecture.media">
      <videogular vg-player-ready="onPlayerReady">
        <video class="videoPlayer" src-key="lecture.media">
        </video>
        <vg-poster-image></vg-poster-image>
        <vg-buffering></vg-buffering>
        <vg-controls style="height: 50px;">
          <vg-play-pause-button></vg-play-pause-button>
          <vg-timeDisplay>{{ currentTime }}</vg-timeDisplay>
          <vg-scrubBar>
            <vg-scrubbarcurrenttime></vg-scrubbarcurrenttime>
          </vg-scrubBar>
          <vg-timeDisplay>{{ totalTime }}</vg-timeDisplay>
          <vg-volume>
            <vg-mutebutton></vg-mutebutton>
            <vg-volumebar></vg-volumebar>
          </vg-volume>
          <vg-fullscreenButton></vg-fullscreenButton>
        </vg-controls>
      </videogular>
      <a style="position: absolute; right: -.5em; top: .5em; z-index:999"
         ng-click="removeMedia()" >
        <span class="glyphicon glyphicon-remove"></span>
      </a>
    </div>
  </div>
  <hr/>
  <div class="row">
    <div teacher-lecture-keypoints
         lecture="lecture"
         key-points="course.$keyPoints"
         category-id="course.categoryId"
         media-api="mediaApi">
    </div>
  </div>
  <hr/>
  <div class="row">
    <div teacher-lecture-questions
         lecture="lecture"
         library-questions="course.$libraryQuestions"
         key-points="course.$keyPoints"
         category-id="course.categoryId"></div>
  </div>
</div>
